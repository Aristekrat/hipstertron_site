/*! hipster_tron 24-12-2014 */
"use strict";angular.module("hipstertron",["ngRoute","hipstertron.services","hipstertron.controllers","angulartics","angulartics.google.analytics"]).config(["$routeProvider","$locationProvider",function($routeProvider,$locationProvider){$routeProvider.when("/",{templateUrl:"partials/main.html",controller:"MainCtrl",title:"Find Concerts in Denver, Concert Finder, Concerts in Denver",description:"Hipster Tron tells you if an artist in your iTunes library is coming to town as soon as the announcement comes out, 100% Free."}),$routeProvider.when("/calendar",{templateUrl:"partials/calendar.html",controller:"CalendarCtrl",title:"List of Denver Concerts",description:"A full list of all concerts coming to Denver."}),$routeProvider.when("/info/:type",{templateUrl:"partials/info.html",controller:"InfoCtrl"}),$routeProvider.when("/signup",{templateUrl:"partials/signup.html",controller:"SignUpCtrl",title:"Sign Up for Hipstertron",description:"Sign up for Hipstertron to find out when your favorite bands are coming to town and get help getting your hands on tickets"}),$routeProvider.when("/privacy-policy",{templateUrl:"partials/privacy-policy.html",controller:"PrivacyCtrl",title:"Privacy Policy",description:"This page sets out Hipstertron's Privacy Policy"}),$routeProvider.otherwise({redirectTo:"/"}),$locationProvider.html5Mode(!0).hashPrefix("!")}]).controller("AppCtrl",["$scope","$route","$location",function($scope,$route){$scope.$on("$routeChangeSuccess",function(){$scope.seo={title:$route.current.title,description:$route.current.description}})}]),angular.module("hipstertron.controllers",[]).controller("MainCtrl",["$scope","submitEmailService",function($scope,submitEmailService){$scope.userEmail={},$scope.userEmail.frequency="weekly",$scope.errorHandler=function(){$scope.emailError=!0},$scope.successHandler=function(){$scope.signedUp=!0},$scope.signUserUp=function(userEmail){userEmail.email?($scope.emailPlease=!1,submitEmailService.submitEmail(userEmail,$scope.successHandler,$scope.errorHandler)):$scope.emailPlease=!0}}]).controller("CalendarCtrl",["$scope","getConcertsService",function($scope,getConcertsService){$scope.concertListings={};var resultCount=120,offset=0,runCount=[];runCount.push(resultCount),getConcertsService.getConcerts(resultCount,offset,function(response){$scope.concertListings=response.data.concertListings}),$(window).scroll(function(){$(this).scrollTop()+1e3>$(document).height()-$(window).height()&&1===runCount.length&&(resultCount=500,runCount.push(resultCount),getConcertsService.getConcerts(resultCount,runCount[0],function(response){$scope.concertListings=$scope.concertListings.concat(response.data.concertListings)}))})}]).controller("InfoCtrl",["$scope","$routeParams",function($scope,$routeParams){function activateNav(correctNav){for(var navOptions=["aboutActive","findActive","reserveActive","cheapActive"],i=0;navOptions.length>i;i++){var t=navOptions[i];$scope[t]=navOptions[i]===correctNav?"info-link-active":""}}"about-hipstertron"===$routeParams.type?($scope.aboutRequested=!0,activateNav("aboutActive"),$scope.$parent.seo={title:"About Hipstertron",description:"Sign Up for Hipstertron to get notified whenever your favorite bands are coming to Denver and help getting tickets."}):"find-tickets"===$routeParams.type?($scope.findRequested=!0,activateNav("findActive"),$scope.$parent.seo={title:"Concert Finder in Denver",description:"Hipstertron will let you know when your favorite bands are coming to Denver, 100% free."}):"reserve-tickets"===$routeParams.type?($scope.reserveRequested=!0,activateNav("reserveActive"),$scope.$parent.seo={title:"Reserve Concert Tickets, Get Concert Tickets Denver",description:"Reserve concert tickets in advance with Hipstertron, 100% free."}):"cheap-tickets"===$routeParams.type?($scope.cheapRequested=!0,activateNav("cheapActive"),$scope.$parent.seo={title:"Find Cheap Concert Tickets Denver",description:"Get notified whenever you can pick up cheap concert tickets for bands you like."}):($scope.aboutRequested=!0,activateNav("aboutActive"),$scope.$parent.seo={title:"About Hipstertron",description:"Sign Up for Hipstertron to get notified whenever your favorite bands are coming to Denver and help getting tickets."})}]).controller("SignUpCtrl",["$scope","submitEmailService",function($scope,submitEmailService){$scope.userEmail={},$scope.userEmail.frequency="weekly",$scope.signUserUp=function(userEmail){userEmail.email?($scope.emailPlease=!1,submitEmailService.submitEmail(userEmail,function(){$scope.signedUp=!0})):$scope.emailPlease=!0}}]).controller("PrivacyCtrl",["$scope",function(){}]),angular.module("hipstertron.services",[]).factory("environmentService",["$http",function(){return{getPrefix:function(){var envPrefix={prod:"http://hipstertron-data.herokuapp.com",local:"http://localhost:8000"};return envPrefix.prod}}}]).factory("submitEmailService",["$http","environmentService",function($http,environmentService){return{submitEmail:function(email,callback,errorHandler){$http.post(environmentService.getPrefix()+"/sendEmail",email).success(function(response){return callback(response)}).error(function(response){return errorHandler(response)})}}}]).factory("getConcertsService",["$http","environmentService",function($http,environmentService){return{getConcerts:function(resultCount,offset,callback){$http.get(environmentService.getPrefix()+"/getConcerts/"+resultCount+"/"+offset,{cache:!0}).then(function(response){return callback(response)})}}}]);